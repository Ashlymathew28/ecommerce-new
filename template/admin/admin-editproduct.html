{% extends 'admin/admin-index.html'%}
{% block content %}
{% load static %}

    <div class="container ">
      <h1 style="text-align:center">Edit Product</h1>

      <form action="{% url 'edit_product' prod.id %}" method="post"  enctype="multipart/form-data" id="myForm" onsubmit="return validateForm()">
        {% csrf_token %}
            <div class="row mb-3">
                <label for="inputText" class="col-sm-2 col-form-label">Name of the product</label>
                <div class="col-sm-10">
                    <input type="text" name="productname" value="{{prod.product_name}}" class="form-control">
                </div>
            </div>
                        
            <div class="row mb-3">
                <label for="inputPassword" class="col-sm-2 col-form-label">Description</label>
                <div class="col-sm-10">
                    <textarea class="form-control" name="description" value="{{prod.description}}"style="height: 100px">{{prod.description}}</textarea>
                </div>
            </div>
            <div class="row mb-3">
                <label class="col-sm-2 col-form-label">Category</label>
                <div class="col-sm-10">
                    <select class="form-select" name="category" aria-label="Default select example">
                                           
                        <option selected>{{prod.category}}</option>
                        {% for i in cat %}  
                        <option value="{{i.category_name}}">{{i.category_name}}</option>
                        <!-- <option value="{{cat.id}}">{{cat.category_name}}</option> -->
                        
                      {% endfor %}
                      
                    </select>
                </div>
            </div>
            
            
            <div style="width: 10rem;height: 7rem;" class="mx-auto"><img src="/media/{{prod.images}}" alt="..." class=" w-100 h-100"></div>

            <div class="row mb-3">
                <label for="inputNumber" class="col-sm-2 col-form-label">File Upload</label>
                <div class="col-sm-10">
                    <input class="form-control" type="file"  value="{{prod.images.url}}" name="Image" id="formFile">
                </div>
            </div>
                
            <div style="width: 10rem;height: 7rem;" class="mx-auto"><img src="/media/{{prod.image1}}" alt="..." class=" w-100 h-100"></div>

            <div class="row mb-3">
                <label for="inputNumber" class="col-sm-2 col-form-label">File Upload</label>
                <div class="col-sm-10">
                    <input class="form-control" type="file"  value="{{prod.image1.url}}" name="Image" id="formFile">
                </div>
            </div>

            <div style="width: 10rem;height: 7rem;" class="mx-auto"><img src="/media/{{prod.image2}}" alt="..." class=" w-100 h-100"></div>


            <div class="row mb-3">
                <label for="inputNumber" class="col-sm-2 col-form-label">File Upload</label>
                <div class="col-sm-10">
                    <input class="form-control" type="file"  value="{{prod.image2.url}}" name="Image" id="formFile">
                </div>
            </div>
            <!-- <div class="row mb-3">
                <label for="inputDate" class="col-sm-2 col-form-label">Date of Publish</label>
                <div class="col-sm-10">
                    <input type="date" name="dateofpublish" class="form-control">
                </div>
            </div> -->
                        <div class="row mb-3">
                <label for="inputDate" class="col-sm-2 col-form-label">Price</label>
                <div class="col-sm-10">
                    <input type="number" name="price" value="{{prod.price}}" class="form-control">
                </div>
            </div>
            <div class="row mb-3">
                <label for="inputDate" class="col-sm-2 col-form-label">Stock</label>
                <div class="col-sm-10">
                    <input type="number" name="stock" value="{{prod.stock}}" class="form-control">
                </div>
            </div>
            <div class="row mb-3">
                <label class="col-sm-2 col-form-label"></label>
                <div class="col-sm-10">
                    <button type="submit" class="btn btn-primary">Edit</button>
                </div>
            </div>

        </form>
    </div>
<!-- </section> -->
<script>


function validateForm() {
    // Get form inputs
    var productName = document.forms["myForm"]["productname"].value;
    var description = document.forms["myForm"]["description"].value;
    var category = document.forms["myForm"]["category"].value;
    var price = document.forms["myForm"]["price"].value;
    var stock = document.forms["myForm"]["stock"].value;
    
    // Check if product name is filled out
    if (productName.trim() == "" || productName.length == 0) {
        alert("Name of the product must be filled out");
        return false;
    }
    
    // Check if description is filled out
    if (description.trim() == "" || description.length == 0) {
        alert("Description must be filled out");
        return false;
    }
    
    // Check if category is selected
    if (category == "" || category.length == 0) {
        alert("Category must be selected");
        return false;
    }
    
    // Check if price is a number
    if (isNaN(price) || price == "") {
        alert("Price must be a number");
        return false;
    }
    
    // Check if stock is a number
    if (isNaN(stock) || stock == "") {
        alert("Stock must be a number");
        return false;
    }
    
    // Validation successful
    return true;
}

</script>


{% endblock %}