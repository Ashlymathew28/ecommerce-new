{% extends 'admin/admin-index.html'%}
{% block content %}
{% load static %}

    <div class="container ">
      <h1 style="text-align:center">Add Product</h1>

        <!-- <form action="{% url 'admin_addproduct' %}" method="post"  enctype="multipart/form-data"> -->
            <form action="{% url 'admin_addproduct' %}" method="post" id="myForm" enctype="multipart/form-data" onsubmit="return validateForm()">

            {% csrf_token %}
            <div class="row mb-3">
                <label for="inputText" class="col-sm-2 col-form-label" required minlength="3" maxlength="50">Name of the product</label>
                <div class="col-sm-10">
                    <input type="text" name="productname" class="form-control">
                </div>
            </div>
                        
            <div class="row mb-3">
                <label for="inputPassword" class="col-sm-2 col-form-label">Description</label>
                <div class="col-sm-10">
                    <textarea class="form-control" name="description" style="height: 100px"></textarea>
                </div>
            </div>
            <div class="row mb-3">
                <label class="col-sm-2 col-form-label">Category</label>
                <div class="col-sm-10">
                    <select class="form-select" name="category" aria-label="Default select example">
                                           
                        <option selected>Select category</option>
                        {% for i in cat %}  
                        <option value="{{i.id}}">{{i.category_name}}</option>
                        <!-- <option value="{{cat.id}}">{{cat.category_name}}</option> -->
                        
                      {% endfor %}
                      
                    </select>
                </div>
            </div>
            
            <div class="row mb-3">
                <label for="inputNumber" class="col-sm-2 col-form-label">File Upload</label>
                <div class="col-sm-10">
                    <input class="form-control" type="file" name="Image" oninput="checker(this)" id="formFile">
                </div>
            </div>

            <div class="row mb-3">
                <label for="inputNumber" class="col-sm-2 col-form-label">File Upload</label>
                <div class="col-sm-10">
                    <input class="form-control" type="file" name="Image1" oninput="checker(this)" id="formFile">
                </div>
            </div>

            <div class="row mb-3">
                <label for="inputNumber" class="col-sm-2 col-form-label">File Upload</label>
                <div class="col-sm-10">
                    <input class="form-control" type="file" name="Image2" oninput="checker(this)" id="formFile">
                </div>
            </div>
            <!-- <div class="row mb-3">
                <label for="inputDate" class="col-sm-2 col-form-label">Date of Publish</label>
                <div class="col-sm-10">
                    <input type="date" name="dateofpublish" class="form-control">
                </div>
            </div> -->
                        <div class="row mb-3">
                <label for="inputDate" class="col-sm-2 col-form-label">Price</label>
                <div class="col-sm-10">
                    <input type="number" name="price" class="form-control">
                </div>
            </div>
            <div class="row mb-3">
                <label for="inputDate" class="col-sm-2 col-form-label">Stock</label>
                <div class="col-sm-10">
                    <input type="number" name="stock" class="form-control">
                </div>
            </div>
            <div class="row mb-3">
                <label class="col-sm-2 col-form-label"></label>
                <div class="col-sm-10">
                    <button type="submit" class="btn btn-primary">Add</button>
                </div>
            </div>

        </form>
    </div>
<!-- </section> -->
<script>
       function checker(id){
    img = document.getElementById(id.id).value
    if(!img.match(/\.(jpg|jpeg|png|gif|pdf)$/)){
        console.log("lllllllllllllllllllllllllllllllllll");
    //   swal("image should be jpg , jpeg , png")
      document.getElementById(id.id).value = "";
      }


    }

    
function validateForm() {
    var productName = document.forms["myForm"]["productname"].value;
    var description = document.forms["myForm"]["description"].value;
    var category = document.forms["myForm"]["category"].value;
    var image = document.forms["myForm"]["Image"].value;
    var image1 = document.forms["myForm"]["Image1"].value;
    var image2 = document.forms["myForm"]["Image2"].value;
    var price = document.forms["myForm"]["price"].value;
    var stock = document.forms["myForm"]["stock"].value;
    console.log("prod lengtg",productName.length);

    if (productName.trim() === "") {
    alert("Name of the product must be filled out");
    return false;
    }


    if (description.trim() == "") {
        alert("Description must be filled out");
        return false;
    }

    if (category == "Select category") {
        alert("Category must be selected");
        return false;
    }

    if (image == "") {
        alert("At least one image must be uploaded");
        return false;
    }
    if (image1 == "") {
        alert(" image must be uploaded");
        return false;
    }
    if (image2 == "") {
        alert("image must be uploaded");
        return false;
    }

    if (price == "") {
        alert("Price must be filled out");
        return false;
    }

    if (stock == "") {
        alert("Stock must be filled out");
        return false;
    }
}
</script>




{% endblock %}